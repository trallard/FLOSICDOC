
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Accessing and compiling the code &#8212; NRLMOL  2020 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Quick start guide to running a FLOSIC calculation" href="setupcal.html" />
    <link rel="prev" title="Introduction and Overview" href="../index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="setupcal.html" title="Quick start guide to running a FLOSIC calculation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="Introduction and Overview"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../main.html">NRLMOL  2020 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Accessing and compiling the code</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="accessing-and-compiling-the-code">
<h1>Accessing and compiling the code<a class="headerlink" href="#accessing-and-compiling-the-code" title="Permalink to this headline">¶</a></h1>
<p>The code is accessible from a git repository hosted at the University of Texas at El Paso (UTEP).
To download the latest version, use a git command as follows:</p>
<p>git clone <a class="reference external" href="mailto:sicuser&#37;&#52;&#48;quantum&#46;utep&#46;edu">sicuser<span>&#64;</span>quantum<span>&#46;</span>utep<span>&#46;</span>edu</a>:pr.git</p>
<p>where the password for this repository is available by communicating with the repository administrator.
(Currently, you can contact Prof. Rajendra R. Zope, rzope(at)utep.edu.)</p>
<p>Once you have obtained the code from the repository, go to the directory containing the source files.  You will
need to edit three blocks of lines in the makefile to suit your needs.</p>
<p><strong>First block: parallel or serial</strong></p>
<p># set Y or N</p>
<p># Parallel compilation</p>
<p>MPI=Y</p>
<p># Group calculation</p>
<p>GROUP=N</p>
<p>In this block, the user specifies whether the compilation will be for a parallel (MPI=Y) or serial (MPI=N) version of the code.
When using a parallel version (MPI=Y), the user can choose to use a multi-level parallel scheme by setting GROUP=Y.
This parallelizes over the orbitals in calculating SIC potentials, and also over the grid points.
This option can deliver a greater speed up than the single-level parallel scheme, but it is not recommended for new users.</p>
<p>Note:</p>
<p>When GROUP=Y, the user should edit the “igroup” file in the run directory.  This file should contain an integer that is
an even divisor of the number of orbitals. For example, for 100 orbitals, igroup might be 10 or 20, but not 15.</p>
<p><strong>Second block: compiler choices</strong></p>
<p># COMPILERS</p>
<p>CC = gcc</p>
<p>FC = mpif90</p>
<p>FFF = mpif90</p>
<p># COMPILER FLAGS</p>
<p>CFLAGS = -O3 -mcmodel=medium</p>
<p>FFLAGS = -O3 -mcmodel=medium</p>
<p>LFLAGS = -O3 -mcmodel=medium</p>
<p>The second block is to specify the compilers and their flags used during the compilation. A number of routines require static allocation of arrays. The code needs to be compiled for appropriate array sizes for the system under study and these static parameters are listed in the file called PARAMA2 (<em>vide infra</em>)</p>
<p>An example of the compilers used for NERSC is below.</p>
<p>CC = cc</p>
<p>FC = ftn</p>
<p>FFF = ftn</p>
<p><strong>Third block: linking options</strong></p>
<p># Linking options</p>
<p>$(FFF) $(LFLAGS) $(OBJ) -o $(BIN) -llapack -lblas $(LIBS)</p>
<p>This block specifies the libraries used for linking, where it is recommended to use optimized BLAS and LPACK libraries if they are available on your platform to achieve the best performance.</p>
<p>Edit PARAMA2 for static parameters :</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 78%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>parameter</p></th>
<th class="head"><p>brief  explanation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>MAX_PTS</em></p></td>
<td><p>maximum size of integration grid</p></td>
</tr>
<tr class="row-odd"><td><p><em>MX_SPH</em></p></td>
<td><p>needed to generate the integration mesh</p></td>
</tr>
<tr class="row-even"><td><p><em>MAXUNSYM</em></p></td>
<td><p>maximum number of orbitals for an atomic basis</p></td>
</tr>
<tr class="row-odd"><td><p><em>NDH</em></p></td>
<td><p>maximum total basis set size</p></td>
</tr>
<tr class="row-even"><td><p><em>NDH_TOT</em></p></td>
<td><p>maximum number of Hamiltonian matrix elements</p></td>
</tr>
<tr class="row-odd"><td><p><em>MAX_OCC</em></p></td>
<td><p>maximum number of occupied states</p></td>
</tr>
<tr class="row-even"><td><p><em>MX_GRP</em></p></td>
<td><p>maximum size of symmetry group</p></td>
</tr>
</tbody>
</table>
<p>An example for serial compilation on a laptop (in this case a mac) is shown below.</p>
<p><strong>First block:</strong> Compile the serial version</p>
<p>MPI=N</p>
<p>GROUP=N</p>
<p><strong>Second block:</strong> use gcc and gfortran compilers</p>
<p>#COMPILERS</p>
<p>CC = gcc</p>
<p>FC = gfortran</p>
<p>FFF = gfortran</p>
<p>#COMPILER FLAGS</p>
<p>CFLAGS = -O3</p>
<p>FFLAGS = -O3</p>
<p>LFLAGS = -O3</p>
<p><strong>Third block:</strong> Use the linking options under Fedora (Quantum/Luis local)</p>
<p>$(FFF) $(LFLAGS) $(OBJ) -o $(BIN) $(PCM_LIBS) $(EFP_LIB) -llapack -lblas $(LIBS)</p>
<p>Use the <em>make</em> command on the command line to compile FLOSIC. If the compilation was successful, an executable file titled <strong>nrlmol_exe</strong> will be created.</p>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="../index.html"
                          title="previous chapter">Introduction and Overview</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="setupcal.html"
                          title="next chapter">Quick start guide to running a FLOSIC calculation</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/docs/setupcode.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="setupcal.html" title="Quick start guide to running a FLOSIC calculation"
             >next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="Introduction and Overview"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../main.html">NRLMOL  2020 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Accessing and compiling the code</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022,   NRLMOL users .
    </div>
  </body>
</html>